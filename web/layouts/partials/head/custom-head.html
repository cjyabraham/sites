{{- $source := "home.scss" }}
{{- $target := "home.css" }}
{{ $options := (dict "targetPath" $target) }}

{{ if eq hugo.Environment "production" }}
{{ $options = merge $options (dict "outputStyle" "compressed" "enableSourceMap" false) }}
{{ else }}
{{ $options = merge $options (dict "outputStyle" "nested" "enableSourceMap" true) }}
{{ end }}

{{ $style := resources.Get $source | resources.ToCSS $options | resources.PostCSS (dict "config" "postcss.config.js") | resources.Fingerprint "sha512" }}

{{ if (eq .Kind "home") }}
<link rel="stylesheet" href="{{ $style.RelPermalink }}" integrity="{{ $style.Data.Integrity }}" media="all">
{{ end }}

<link rel="manifest" href="/pwa.webmanifest">
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="DeepCausality" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<script>
    if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/scripts/sw.js');
    };
</script>